<div class="warp">
	<div class="sef-container">
		<div class="tab-title col-xs-12">
			服务器信息
		</div>
		<div class="tab-line clearfix">
			<div class="col-xs-12">
				<div class="col-xs-6 server-x-text"><i class="fa fa-circle fa-icon"></i><%= @machine.identifier %></div>
				<div class="col-xs-6 server-x-text"><i class="fa fa-circle fa-icon"></i><%= @machine.cpu_type %></div>
				<div class="col-xs-6 server-x-text"><i class="fa fa-circle fa-icon"></i>内存 <%= @machine.machine_detail.memory_total %></div>
				<div class="col-xs-6 server-x-text"><i class="fa fa-circle fa-icon"></i>IP地址 <%= @machine.machine_detail.network_address%></div>
				<div class="col-xs-12 server-x-text"><i class="fa fa-circle fa-icon"></i><%= @machine.machine_detail.cpu_name%></div>
			</div>
		</div>

		<div class="tab-title col-xs-12 text-center">
			<div class="col-xs-6">CPU状态</div>
			<div class="col-xs-6">内存状态</div>
		</div>
		<div class="tab-line clearfix right2">
			<div class="col-xs-12"><div style="height:150px" class="server-air"></div></div>
			<div class="col-xs-6 pie-text">
				<p><i class="fa fa-circle fa-icon"></i>CPU数：<%= @machine.machine_detail.cpu_real %></p>
				<p><i class="fa fa-circle fa-icon"></i>核数：<%= @machine.machine_detail.cpu_total %></p>
				<p><i class="fa fa-circle fa-icon"></i>频率：<%= @machine.machine_detail.mhz %></p>
			</div>
			<div class="col-xs-6 pie-text">
				<p><i class="fa fa-circle fa-icon"></i>已用：<%= @machine.memory_used >> 20 %>M</p>
				<p><i class="fa fa-circle fa-icon"></i>总量：<%= @machine.machine_detail.memory_total.delete("kB").to_i >> 10 %>M</p>
			</div>
		</div>

		<div class="tab-title col-xs-12">
			磁盘信息
		</div>
		<div class="tab-line clearfix">
			<div class="col-xs-12"><div style="height:150px" class="disc"></div></div>
			<br><br>
			<%= link_to result_weather_index_path do %>
				<div class="btn btn-info col-xs-8 col-xs-offset-2 text-center">立即诊断</div>
			<% end %>
			<br>
		</div>

<!-- 		<div class="tab-title col-xs-12">
			<div class="col-xs-6">网络状态</div>
			<div class="col-xs-3"><i class="fa fa-circle fa-icon fa-green"></i>正常</div>
			<div class="col-xs-3"><i class="fa fa-circle fa-icon fa-red"></i>告警</div>
		</div>
		<div class="tab-line clearfix">
			<div class="col-xs-12 right3">
				<div style="height:220px" class="air-fw1"></div>
				<div class="btn btn-info col-xs-8 col-xs-offset-2 text-center">立即诊断</div>
			</div>
		</div> -->

	</div>
</div>

<script type="text/javascript">
	var right2 = $(".right2").height();
	// 路径配置
	require.config({
		paths: {
			echarts: '/assets/echarts'
		}
	});
	
	// 使用
	require(
		[
		'echarts',
		'echarts/chart/pie' // 使用环型图就加载bar模块，按需加载
		],
		function (ec) {
			$(".server-air").each(function(){
				var myChart = ec.init($(this).get(0));
				var labelTop = {
					normal : {
						label : {
							show : true,
							position : 'center',
							formatter : '{b}',
							textStyle: {
								baseline : 'bottom'
							}
						},
						labelLine : {
							show : false
						}
					}
				};
				var labelFromatter = {
					normal : {
						label : {
							formatter : function (params){
								return 100 - params.value + '%'
							},
							textStyle: {
								baseline : 'top'
							}
						}
					},
				}
				var labelBottom = {
					normal : {
						color: '#ccc',
						label : {
							show : true,
							position : 'center'
						},
						labelLine : {
							show : false
						}
					},
					emphasis: {
						color: 'rgba(0,0,0,0)'
					}
				};
				var radius = [40, 55];
				option = {
					legend: {
						show: false,
						x : 'center',
						y : 'center',
						data:[
						'CPU', '内存'
						]
					},
					series : [
					{
						type : 'pie',
						center : ['25%', '50%'],
						radius : radius,
						y: '55%',   // for funnel
						x:'60%', // for funnel
						itemStyle : labelFromatter,
						data : [
						{name:'other', value:<%= 100- @machine.cpu_percent.delete("%").to_i %>, itemStyle : labelBottom},
						{name:'CPU', value:<%= @machine.cpu_percent.delete("%").to_i %>,itemStyle : labelTop}
						]
					},
					{
						type : 'pie',
						center : ['75%', '50%'],
						radius : radius,
						y: '55%',   // for funnel
						x:'80%', // for funnel
						itemStyle : labelFromatter,
						data : [
						{name:'other', value:<%= 100 - @machine.memory_percent.delete("%").to_f %>, itemStyle : labelBottom},
						{name:'内存', value:<%= @machine.memory_percent.delete("%").to_f %>,itemStyle : labelTop}
						]
					}
					]
				};
			// 为echarts对象加载数据 
			myChart.setOption(option); 
		});
}
);
</script>

<script type="text/javascript">
	// 路径配置
	require.config({
		paths: {
			echarts: '/assets/echarts'
		}
	});
	
	// 使用
	require(
		[
		'echarts',
		'echarts/chart/pie' // 使用环型图就加载bar模块，按需加载
		],
		function (ec) {
			$(".disc").each(function(){
				var myChart = ec.init($(this).get(0));
				var labelTop = {
					normal : {
						label : {
							show : true,
							position : 'center',
							formatter : '{b}',
							textStyle: {
								baseline : 'bottom'
							}
						},
						labelLine : {
							show : false
						}
					}
				};
				var labelFromatter = {
					normal : {
						label : {
							formatter : function (params){
								return 100 - params.value + '%'
							},
							textStyle: {
								baseline : 'top'
							}
						}
					},
				}
				var labelBottom = {
					normal : {
						color: '#ccc',
						label : {
							show : true,
							position : 'center'
						},
						labelLine : {
							show : false
						}
					},
					emphasis: {
						color: 'rgba(0,0,0,0)'
					}
				};
				var radius = [40, 55];
				option = {
					legend: {
						show: false,
						x : 'center',
						y : 'center',
						data:['磁盘用量']
					},
					series : [{
						type : 'pie',
						center : ['50%', '50%'],
						radius : radius,
						y: '55%',   // for funnel
						x:'60%', // for funnel
						itemStyle : labelFromatter,
						data : [
						{name:'other', value:<%= 100 - eval(MachineInfo.get_info("file_systems", @machine.identifier))["percent_used"][-2].to_i %>, itemStyle : labelBottom},
						{name:'磁盘用量', value:<%= eval(MachineInfo.get_info("file_systems", @machine.identifier))["percent_used"][-2].to_i %>,itemStyle : labelTop}
						]
					}]
				};
			// 为echarts对象加载数据 
			myChart.setOption(option); 
		});
}
);
</script>

<!-- 网络状态图表 -->
<script type="text/javascript">
// 	var right1 = $(".right3").height();
// 	// 路径配置
// 	require.config({
// 		paths: {
// 			echarts: '/assets/echarts'
// 		}
// 	});
	
// 	// 使用
// 	require(
// 		[
// 		'echarts',
// 		'echarts/chart/line' // 使用折线图就加载bar模块，按需加载
// 		],
// 		function (ec) {
// 			$(".air-fw1").each(function(){
// 				var myChart = ec.init($(this).get(0));   
// 				var option = {
// 					tooltip : {
// 						trigger: 'axis'
// 					},
// 					legend: {
// 						show: false,
// 						data:['直接访问','搜索引擎']
// 					},
// 					toolbox: {
// 						show : true,
// 						feature : {
// 							magicType : {show: true, type: ['tiled']},
// 							restore : {show: true},
// 							saveAsImage : {show: true}
// 						}
// 					},
// 					calculable : true,
// 					grid : {
// 						x: 30,
// 						x2: 30,
// 						y: 30,
// 						y2: 30
// 					},
// 					xAxis : [
// 					{
// 						type : 'category',
// 						splitLine: {show: false },
// 						boundaryGap : false,
// 						data : ['0','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24']
// 					}
// 					],
// 					yAxis : [
// 					{
// 						type : 'value',
// 						name : 'number',
// 						splitLine: {show: true, lineStyle: {type: 'dashed'}},
// 					}
// 					],
// 					series : [
// 					{
// 						type:'line',
// 						stack: '总量',
// 						symbol: 'none',
// 						smooth: true,
// 						z: '-1',
// 						itemStyle: {normal: {areaStyle: {type: 'default',color: '#41DD55'}}},
// 						data:[
// 						15, 22, 28, 33, 37, 40, 42, 44, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 45, 40,
// 						44, 45, 45
// 						],
// 					},
// 					{
// 						type:'line',
// 						stack: '总量',
// 						symbol: 'none',
// 						smooth: true,
// 						z: '-1',
// 						itemStyle: {normal: {areaStyle: {type: 'default', color: '#F04545'}}},
// 						data:[
// 						0, 0, 0, 0, 0, 0, 0, 0, 47, 48, 49, 50, 52, 60, 67, 71, 68, 65, 60, 51, 48, 0,
// 						44, 50, 63
// 						],
// 					}
// 					]
// 				};
// 			// 为echarts对象加载数据 
// 			myChart.setOption(option); 
// 		});
// 	}
// );
</script>







